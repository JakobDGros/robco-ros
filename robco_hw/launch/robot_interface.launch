<?xml version="1.0"?>
<launch>
    <arg name="start_delay" default="0"/>

    <arg name="debug" default="false"/>
    <arg name="start_robot_state_publisher" default="true"/>
    <!--<param name="robot_description" command="$(find xacro)/xacro $(find robco_description)/urdf/hs_aalen.xacro"/>-->

    <node name="robco_hw" pkg="robco_hw" type="robco_hw_node" output="screen" launch-prefix="bash -c 'sleep $(arg start_delay);  xterm -e gdb --args'" if="$(arg debug)"/>
    <node name="robco_hw" pkg="robco_hw" type="robco_hw_node" output="screen" unless="$(arg debug)" launch-prefix="bash -c 'sleep $(arg start_delay); $0 $@'"/>

    <rosparam command="load" file="$(find robco_hw)/config/control.yaml"/>
    <node name="state_controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen" args="robco_state_controller robco_trajectory_controller" launch-prefix="bash -c 'sleep $(arg start_delay); $0 $@'"/>
    <node if="$(arg start_robot_state_publisher)" name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen" launch-prefix="bash -c 'sleep $(arg start_delay); $0 $@'"/>
    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" output="screen">
        <rosparam param="source_list">[robco_state_controller/joint_states]</rosparam>
    </node>
</launch>
